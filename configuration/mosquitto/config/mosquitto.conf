# =============================================================================
# Configuraci贸n de Mosquitto MQTT Broker para ChirpStack
# =============================================================================

# -----------------------------------------------------------------------------
# Puerto 1883 - Comunicaci贸n interna sin cifrado
# Usado por ChirpStack y Gateway Bridges dentro de Docker
# -----------------------------------------------------------------------------
listener 1883
protocol mqtt
allow_anonymous true

# -----------------------------------------------------------------------------
# Puerto 1884 - Comunicaci贸n externa con TLS
# Usado por clientes externos (Node-RED, aplicaciones, dispositivos)
# Puerto asignado por la nube/firewall para MQTT seguro
# -----------------------------------------------------------------------------
listener 1884
protocol mqtt
cafile /mosquitto/certs/ca.pem
certfile /mosquitto/certs/mqtt-server.pem
keyfile /mosquitto/certs/mqtt-server-key.pem
require_certificate true
use_identity_as_username true
tls_version tlsv1.2

# -----------------------------------------------------------------------------
# Configuraci贸n general
# -----------------------------------------------------------------------------
persistence true
persistence_location /mosquitto/data/
log_dest stdout
log_type warning
log_type error
log_type notice
connection_messages true
